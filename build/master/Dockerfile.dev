FROM debian:stable
MAINTAINER Jerem√≠as Casteglione <jeremias@tincan.co.uk>

RUN echo "deb http://cloudfront.debian.net/debian/ stable main" >/etc/apt/sources.list

ENV DEBIAN_FRONTEND noninteractive
RUN apt-get clean && apt-get update -y && apt-get dist-upgrade -y && \
    apt-get install -y python python-pip python3 python3-pip \
                       less vim sqlite3 make && \
    apt-get autoremove --purge -y && apt-get clean

ENV DJANGO_PIP_VERSION 'Django>=1.9,<1.10'
RUN pip2 install $DJANGO_PIP_VERSION && \
    pip3 install $DJANGO_PIP_VERSION

VOLUME ["/opt/tsadm/webapp"]
WORKDIR /opt/tsadm/webapp

EXPOSE 8000
CMD ["python3", "manage.py", "runserver", "0.0.0.0:8000"]
